(this["webpackJsonpspotify-music-search-app"]=this["webpackJsonpspotify-music-search-app"]||[]).push([[0],{144:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),i=a(43),s=a(37),o=a(89),u=a(32),m=a(25),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.albums;switch(t.type){case"SET_ALBUMS":return a;case"ADD_ALBUMS":return Object(m.a)(Object(m.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.artists;switch(t.type){case"SET_ARTISTS":return a;case"ADD_ARTISTS":return Object(m.a)(Object(m.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.playlists;switch(t.type){case"SET_PLAYLIST":return a;case"ADD_PLAYLIST":return Object(m.a)(Object(m.a)({},e),{},{next:a.next,items:[].concat(Object(u.a)(e.items),Object(u.a)(a.items))});default:return e}},f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,b=Object(s.e)(Object(s.c)({albums:p,artists:E,playlist:d}),f(Object(s.a)(o.a))),h=a(59),y=a(60),v=a(67),g=a(66),S=a(34),T=a(10),O=a(152),_=a(13),A=function(){return r.a.createElement("h1",{className:"main-heading"},"Tasty Music")},k=a(16),L=a(73);a(146);L.a.initializeApp({apiKey:"AIzaSyCLiQnZtpR097NmNA7ys7H0oM2MenyLFSg",authDomain:"tasty-music.firebaseapp.com",projectId:"tasty-music",storageBucket:"tasty-music.appspot.com",messagingSenderId:"835600654268",appId:"1:835600654268:web:60fc855cd3be3638c455b9",measurementId:"G-6K87QKKNQH"});var j=L.a,x=a(90),C=a(69),I=a(28),D=a(92),w=a(30),N=a(74),R={TITLE_ASC:{column:"title",direction:"asc",title:"TITLE \u2193"},TITLE_DESC:{column:"title",direction:"desc",title:"TITLE \u2191"},VOTE_ASC:{column:"vote",direction:"asc",title:"VOTE \u2193"},VOTE_DESC:{column:"vote",direction:"desc",title:"VOTE \u2191"},RANK_ASC:{column:"rank",direction:"asc",title:"TASTE \u2193"},RANK_DESC:{column:"rank",direction:"desc",title:"TASTE \u2191"}},P={ALL:{name:"ALL",filter:""},PLAYLIST:{name:"Playlist",filter:""},ARTIST:{name:"Artist",filter:""},ALBUM:{name:"Album",filter:""},SONG:{name:"Song",filter:""}};function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL";return"ALL"!=P[t].name&&e!=P[t].name}function B(e,t,a,n){e?(a++,n++):(a--,n++);j.firestore().collection("menu").doc(t).update({rank:a,vote:n})}var M=function(){var e=Object(n.useState)("RANK_DESC"),t=Object(k.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("ALL"),i=Object(k.a)(l,2),s=i[0],o=i[1],u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"RANK_DESC",t=Object(n.useState)([]),a=Object(k.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var t=j.firestore().collection("menu").orderBy(R[e].column,R[e].direction).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())}));c(t)}));return function(){return t()}}),[e]),r}(a);return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement("h2",null,"Taste List"),r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(I.a,{lg:12,sx:12},r.a.createElement(N.a,{className:"tastebuttons"},r.a.createElement(_.a,{onClick:function(e){return o("ALL")},variant:"outline-info"},"ALL"),r.a.createElement(_.a,{onClick:function(e){return o("ALBUM")},variant:"outline-info"},"ALBUM"),r.a.createElement(_.a,{onClick:function(e){return o("ARTIST")},variant:"outline-info"},"ARTIST"),r.a.createElement(_.a,{onClick:function(e){return o("PLAYLIST")},variant:"outline-info"},"PLAYLIST"),r.a.createElement(w.a,{as:N.a,title:"Dropdown",id:"bg-nested-dropdown"},r.a.createElement(w.a.Toggle,{variant:"outline-success",id:"dropdown-basic"},"SORT: ",R[a].title),r.a.createElement(w.a.Menu,null,r.a.createElement(w.a.Item,{onSelect:function(e){return c("TITLE_ASC")}},"TITLE(a-z)"),r.a.createElement(w.a.Item,{onSelect:function(e){return c("TITLE_DESC")}},"TITLE(z-a)"),r.a.createElement(w.a.Item,{onSelect:function(e){return c("VOTE_ASC")}},"VOTES(low-high)"),r.a.createElement(w.a.Item,{onSelect:function(e){return c("VOTE_DESC")}},"VOTES(high-low)"),r.a.createElement(w.a.Item,{onSelect:function(e){return c("RANK_ASC")}},"TASTE(low-high)"),r.a.createElement(w.a.Item,{onSelect:function(e){return c("RANK_DESC")}},"TASTE(high-low)"))))))),r.a.createElement("hr",null),r.a.createElement("ol",{className:"tastelist"},u.map((function(e){return r.a.createElement("li",{key:e.id,hidden:V(e.type,s)},r.a.createElement(C.a,null,r.a.createElement(I.a,{xs:4,md:4,lg:4},r.a.createElement("a",{href:e.link,target:"_"},r.a.createElement(D.a,{src:e.src,rounded:!0,fluid:!0}))),r.a.createElement(I.a,{xs:4,md:3,lg:3},e.title,r.a.createElement("br",null),e.author),r.a.createElement(I.a,{xs:4,md:2,lg:2},r.a.createElement(_.a,{variant:"outline-success",size:"lg",onClick:function(t){return B(!0,e.id,e.rank,e.vote)},block:!0},"I LIKE"),r.a.createElement(_.a,{variant:"outline-danger",size:"lg",onClick:function(t){return B(!1,e.id,e.rank,e.vote)},block:!0},"I HATE")),r.a.createElement(I.a,{xs:12,md:3,lg:3},r.a.createElement(C.a,null,r.a.createElement(I.a,{xs:6,md:12,lg:12},"Taste Score: ",e.rank),r.a.createElement(I.a,{xs:6,md:12,lg:12},"VOTES: ",e.vote)))),r.a.createElement("hr",null))})))))},U=Object(i.b)()((function(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AUTHORIZE_URL:"https://accounts.spotify.com/authorize",REACT_APP_CLIENT_ID:"e48bf8e7d10d45918309f9e2e687762d",REACT_APP_REDIRECT_URL:"http://localhost:3000/redirect"}),a=t.REACT_APP_CLIENT_ID,n=t.REACT_APP_AUTHORIZE_URL,c=t.REACT_APP_REDIRECT_URL,l=e.isValidSession,i=e.location.state,s=i&&i.session_expired;return r.a.createElement(r.a.Fragment,null,l()?r.a.createElement(T.a,{to:"/dashboard"}):r.a.createElement("div",{className:"login"},r.a.createElement(A,null),s&&r.a.createElement(O.a,{variant:"info"},"Session expired. Please login again."),r.a.createElement("h2",null,"Test your taste "),r.a.createElement("p",null,"Contribute to the almighty taste list anonymously Shhh.. "),r.a.createElement("p",null,"Contribute to the almighty taste list "),r.a.createElement("p",null,"see if your taste in music will be on top of the list or the bottom!! "),r.a.createElement(_.a,{variant:"info",type:"submit",onClick:function(){window.location="".concat(n,"?client_id=").concat(a,"&redirect_uri=").concat(c,"&response_type=token&show_dialog=true")}},"Login to spotify"),r.a.createElement(M,null)))})),K=a(18),z=a.n(K),F=a(56),H=a.n(F),Y=function(){try{var e=JSON.parse(localStorage.getItem("params"));e&&(H.a.defaults.headers.common.Authorization="Bearer ".concat(e.access_token))}catch(t){console.log("Error setting auth",t)}},J=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setExpiryTime,a=e.history,n=e.location;try{if(z.a.isEmpty(n.hash))return a.push("/dashboard");var r=n.hash.slice(1).split("&").reduce((function(e,t){var a=t.split("="),n=Object(k.a)(a,2),r=n[0],c=n[1];return e[r]=c,e}),{}),c=(new Date).getTime()+1e3*r.expires_in;localStorage.setItem("params",JSON.stringify(r)),localStorage.setItem("expiry_time",c),t(c),a.push("/dashboard")}catch(l){a.push("/")}}},{key:"render",value:function(){return null}}]),a}(r.a.Component),G=a(14),Q=a.n(G),W=a(27),Z=function(){var e=Object(W.a)(Q.a.mark((function e(t,a){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(),e.next=3,H.a.get(t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(e){return{type:"SET_ALBUMS",albums:e}},X=function(e){return{type:"SET_ARTISTS",artists:e}},$=function(e){return{type:"SET_PLAYLIST",playlists:e}},ee=function(e){return function(){var t=Object(W.a)(Q.a.mark((function t(a){var n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z(e);case 3:return n=t.sent,t.abrupt("return",a({type:"ADD_ALBUMS",albums:n.albums}));case 7:t.prev=7,t.t0=t.catch(0),console.log("error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},te=function(e){return function(){var t=Object(W.a)(Q.a.mark((function t(a){var n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z(e);case 3:return n=t.sent,t.abrupt("return",a({type:"ADD_ARTISTS",artists:n.artists}));case 7:t.prev=7,t.t0=t.catch(0),console.log("error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ae=function(e){return function(){var t=Object(W.a)(Q.a.mark((function t(a){var n;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z(e);case 3:return n=t.sent,t.abrupt("return",a({type:"ADD_PLAYLIST",playlists:n.playlists}));case 7:t.prev=7,t.t0=t.catch(0),console.log("error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ne=a(154),re=a(42),ce=a.n(re),le=function(e){var t=e.albums;return r.a.createElement(r.a.Fragment,null,Object.keys(t).length>0&&r.a.createElement("div",{className:"albums"},t.items.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ne.a,{style:{width:"18rem"}},r.a.createElement("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link"},z.a.isEmpty(e.images)?r.a.createElement("img",{src:ce.a,alt:""}):r.a.createElement(ne.a.Img,{variant:"top",src:e.images[0].url,alt:""})),r.a.createElement(ne.a.Body,null,r.a.createElement(ne.a.Title,null,e.name),r.a.createElement(ne.a.Text,null,r.a.createElement("small",null,e.artists.map((function(e){return e.name})).join(", "))),r.a.createElement(_.a,{variant:"outline-success",size:"lg",onClick:function(t){return function(e,t,a,n,r){e.preventDefault(),j.firestore().collection("menu").add({title:n,link:t,rank:0,vote:0,user:"test",src:a,author:r,type:"Album"}).then((function(){}))}(t,e.external_urls.spotify,e.images[0].url,e.name,e.artists.map((function(e){return e.name})).join(", "))}},"ADD IT"))))}))))},ie=function(e){var t=e.artists;return r.a.createElement(r.a.Fragment,null,Object.keys(t).length>0&&r.a.createElement("div",{className:"artists"},t.items.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ne.a,{style:{width:"18rem"}},r.a.createElement("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link"},z.a.isEmpty(e.images)?r.a.createElement("img",{src:ce.a,alt:""}):r.a.createElement(ne.a.Img,{variant:"top",src:e.images[0].url,alt:""})),r.a.createElement(ne.a.Body,null,r.a.createElement(ne.a.Title,null,e.name),r.a.createElement(_.a,{variant:"outline-success",size:"lg",onClick:function(t){return function(e,t,a,n){e.preventDefault(),j.firestore().collection("menu").add({title:n,link:t,rank:0,vote:0,user:"test",src:a,author:"",type:"Artist"}).then((function(){}))}(t,e.external_urls.spotify,e.images[0].url,e.name)}},"ADD IT"))))}))))},se=function(e){var t=e.playlist;return r.a.createElement("div",null,Object.keys(t).length>0&&r.a.createElement("div",{className:"playlist"},t.items.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ne.a,{style:{width:"18rem"}},r.a.createElement("a",{target:"_blank",href:e.external_urls.spotify,rel:"noopener noreferrer",className:"card-image-link"},z.a.isEmpty(e.images)?r.a.createElement("img",{src:ce.a,alt:""}):r.a.createElement(ne.a.Img,{variant:"top",src:e.images[0].url,alt:""})),r.a.createElement(ne.a.Body,null,r.a.createElement(ne.a.Title,null,e.name),r.a.createElement(ne.a.Text,null,r.a.createElement("small",null,"By testing",e.owner.display_name)),r.a.createElement(_.a,{variant:"outline-success",size:"lg",onClick:function(t){return function(e,t,a,n,r){e.preventDefault(),j.firestore().collection("menu").add({title:n,link:t,rank:0,vote:0,user:"test",src:a,author:r,type:"Playlist"}).then((function(){}))}(t,e.external_urls.spotify,e.images[0].url,e.name,e.owner.display_name)}},"ADD IT"))))}))))},oe=function(e){var t=e.isValidSession,a=e.loadMore,n=e.result,c=e.setCategory,l=e.selectedCategory,i=n.albums,s=n.artists,o=n.playlist;return t()?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-buttons"},!z.a.isEmpty(i.items)&&r.a.createElement("button",{className:"".concat("albums"===l?"btn active":"btn"),onClick:function(){return c("albums")}},"Albums"),!z.a.isEmpty(s.items)&&r.a.createElement("button",{className:"".concat("artists"===l?"btn active":"btn"),onClick:function(){return c("artists")}},"Artists"),!z.a.isEmpty(o.items)&&r.a.createElement("button",{className:"".concat("playlist"===l?"btn active":"btn"),onClick:function(){return c("playlist")}},"PlayLists")),r.a.createElement("div",{className:"".concat("albums"===l?"":"hide")},i&&r.a.createElement(le,{albums:i})),r.a.createElement("div",{className:"".concat("artists"===l?"":"hide")},s&&r.a.createElement(ie,{artists:s})),r.a.createElement("div",{className:"".concat("playlist"===l?"":"hide")},o&&r.a.createElement(se,{playlist:o})),!z.a.isEmpty(n[l])&&!z.a.isEmpty(n[l].next)&&r.a.createElement("div",{className:"load-more",onClick:function(){return a(l)}},r.a.createElement(_.a,{variant:"info",type:"button"},"Load More"))):r.a.createElement(T.a,{to:{pathname:"/",state:{session_expired:!0}}})},ue=a(153),me=function(e){var t=Object(n.useState)(""),a=Object(k.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),s=Object(k.a)(i,2),o=s[0],u=s[1];return r.a.createElement("div",null,r.a.createElement(ue.a,{onSubmit:function(t){t.preventDefault(),""!==c.trim()?(u(""),e.handleSearch(c)):u("Please enter a search term.")}},o&&r.a.createElement("p",{className:"errorMsg"},o),r.a.createElement(ue.a.Group,{controlId:"formBasicEmail"},r.a.createElement(ue.a.Label,null,"Enter search term"),r.a.createElement(ue.a.Control,{type:"search",name:"searchTerm",value:c,placeholder:"Search for album, artist or playlist",onChange:function(e){var t=e.target.value;l(t)},autoComplete:"off"})),r.a.createElement(_.a,{variant:"info",type:"submit"},"Search")))},pe=function(e){var t=Object(n.useState)(document.createElement("div")),a=Object(k.a)(t,1)[0],r=document.querySelector("#loader");return Object(n.useEffect)((function(){r.appendChild(a).classList.add("message")}),[r,a]),Object(n.useEffect)((function(){e.show?(r.classList.remove("hide"),document.body.classList.add("loader-open")):(r.classList.add("hide"),document.body.classList.remove("loader-open"))}),[r,e.show]),l.a.createPortal(e.children,a)},Ee=a(48),de=Object(i.b)((function(e){return{albums:e.albums,artists:e.artists,playlist:e.playlist}}))((function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)("albums"),s=Object(k.a)(i,2),o=s[0],u=s[1],m=e.isValidSession,p=e.history,E=function(){var t=Object(W.a)(Q.a.mark((function t(a){var n,r,c,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m()){t.next=18;break}n=e.dispatch,r=e.albums,c=e.artists,i=e.playlist,l(!0),t.t0=a,t.next="albums"===t.t0?6:"artists"===t.t0?9:"playlist"===t.t0?12:15;break;case 6:return t.next=8,n(ee(r.next));case 8:return t.abrupt("break",15);case 9:return t.next=11,n(te(c.next));case 11:return t.abrupt("break",15);case 12:return t.next=14,n(ae(i.next));case 14:return t.abrupt("break",15);case 15:l(!1),t.next=19;break;case 18:p.push({pathname:"/",state:{session_expired:!0}});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d={albums:e.albums,artists:e.artists,playlist:e.playlist},f=Object(n.useState)(!1),b=Object(k.a)(f,2),h=b[0],y=b[1],v=function(){return y(!1)};return r.a.createElement(r.a.Fragment,null,m()?r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement("h2",null,"Its time to put your favorite music to the taste test!!"),r.a.createElement(_.a,{variant:"outline-success",size:"lg",onClick:function(){return y(!0)},block:!0},"Add to the list"),r.a.createElement(M,null),r.a.createElement(Ee.a,{show:h,onHide:v,size:"lg"},r.a.createElement(Ee.a.Header,{closeButton:!0},r.a.createElement(Ee.a.Title,null,"Spotify Search ")),r.a.createElement(Ee.a.Body,null,r.a.createElement(me,{handleSearch:function(t){m()?(l(!0),e.dispatch(function(e){return function(){var t=Object(W.a)(Q.a.mark((function t(a){var n,r,c,l,i;return Q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="https://api.spotify.com/v1/search?query=".concat(encodeURIComponent(e),"&type=album,playlist,artist"),t.next=4,Z(n);case 4:return r=t.sent,console.log(r),c=r.albums,l=r.artists,i=r.playlists,a(q(c)),a(X(l)),t.abrupt("return",a($(i)));case 12:t.prev=12,t.t0=t.catch(0),console.log("error",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(t)).then((function(){l(!1),u("albums")}))):p.push({pathname:"/",state:{session_expired:!0}})}}),r.a.createElement(pe,{show:c},"Loading..."),r.a.createElement(oe,{result:d,loadMore:E,setCategory:function(e){u(e)},selectedCategory:o,isValidSession:m})),r.a.createElement(Ee.a.Footer,null,r.a.createElement(_.a,{variant:"secondary",onClick:v},"Close")))):r.a.createElement(T.a,{to:{pathname:"/",state:{session_expired:!0}}}))})),fe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),"Page not found. Goto ",r.a.createElement(S.b,{to:"/dashboard"},"Home Page"))},be=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={expiryTime:"0"},e.setExpiryTime=function(t){e.setState({expiryTime:t})},e.isValidSession=function(){return(new Date).getTime()<e.state.expiryTime},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e;try{e=JSON.parse(localStorage.getItem("expiry_time"))}catch(t){e="0"}this.setState({expiryTime:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(S.a,null,r.a.createElement("div",{className:"main"},r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/",exact:!0,render:function(t){return r.a.createElement(U,Object.assign({isValidSession:e.isValidSession},t))}}),r.a.createElement(T.b,{path:"/redirect",render:function(t){return r.a.createElement(J,Object.assign({isValidSession:e.isValidSession,setExpiryTime:e.setExpiryTime},t))}}),r.a.createElement(T.b,{path:"/dashboard",render:function(t){return r.a.createElement(de,Object.assign({isValidSession:e.isValidSession},t))}}),r.a.createElement(T.b,{component:fe}))))}}]),a}(r.a.Component);a(143),a(144);l.a.render(r.a.createElement(i.a,{store:b},r.a.createElement(be,null)),document.getElementById("root"))},42:function(e,t,a){e.exports=a.p+"static/media/music.1b265192.jpeg"},97:function(e,t,a){e.exports=a(145)}},[[97,1,2]]]);
//# sourceMappingURL=main.d11db26e.chunk.js.map